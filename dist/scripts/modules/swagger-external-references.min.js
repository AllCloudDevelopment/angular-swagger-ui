"use strict";angular.module("swaggerUi").service("swaggerUiExternalReferences",["$http","$q","swaggerModules",function(a,b,c){function d(a){k.reject(a)}function e(b,e){var f={method:"GET",url:b};c.execute(c.BEFORE_LOAD,f).then(function(){a(f).success(e).error(function(a,b){d({message:a,code:b})})})["catch"](d)}function f(a){var b=a.split("#/"),c=b[0];if(0!==c.indexOf("http")&&0!==c.indexOf("https"))if(0===c.indexOf("/")){var d=URL.parse(j);c=d.protocol+"//"+d.host+c}else{var e=j.lastIndexOf("/");c=j.substring(0,e)+"/"+c}return c}function g(){function a(a){b++,e(f(a.$ref),function(c){b--,delete a.$ref;for(var d in c)a[d]=c[d];0===b&&i()})}var b=0;for(var c in l.paths){var c=l.paths[c];h(c)&&a(c)}0===b&&i()}function h(a){return a&&a.$ref&&0!==a.$ref.indexOf("#/")}function i(){function a(a){var c=a.$ref.split("#/"),h=f(a.$ref);i[h]||(g++,i[h]=!0,e(h,function(a){for(var e in a){l.definitions[c[0]+"#/"+e]=a[e];for(var f in a[e]){var h=a[e][f];if(h.parameters||h.responses){d(h);for(var i=0,j=h.parameters||[],m=j.length;m>i;i++)b(j[i],c[0]);for(var n in h.responses||{})b(h.responses[n],c[0])}}}g--,0===g&&k.resolve()}))}function b(a,b){var c=a.schema&&a.schema.$ref;c&&0===c.indexOf("#/")&&(a.schema.$ref=b+"#/"+c)}function c(b){h(b)?a(b):h(b.items)&&a(b.items)}function d(a){for(var b=0,d=a.parameters||[],e=d.length;e>b;b++)d[b].schema&&c(d[b].schema);for(var f in a.responses||{})a.responses[f].schema&&c(a.responses[f].schema)}var g=0,i={};for(var j in l.paths){var m=l.paths[j];for(var n in m)d(m[n])}0===g&&k.resolve()}var j,k,l;this.execute=function(a,c){return j=a,l=c,k=b.defer(),g(),k.promise}}]);